@using ComX_0._0._2.Helpers
@using ComX_0._0._2.Views.Articles.Services
@model ComX_0._0._2.Views.Articles.Models.DtoModels.CommentModelDto
@{
    Layout = Request.IsAjaxRequest() ? null : "~/Views/Articles/_Articles.cshtml";
    ViewBag.Title = "Rozedytuj swój (słaby) komentarz - NEKROPLAZA";
    UserHelper userHelper = new UserHelper();
    bool canEdit = Model.UserId == userHelper.GetCurrentLoggedUserId() || userHelper.UserIsAdmin(userHelper.GetCurrentLoggedUserId());
}
@if (canEdit) {
    using (Html.BeginForm()) {
        @Html.AntiForgeryToken()
        <div class="newCommentSection">
            <div class="form-horizontal">
                <div class="form-group">
                    <div class="commentInputBlock">
                        <textarea id="editCommentWindowContainer" class="form-control articleEditor"></textarea>
                        <input id="bodyCommentEditContainer" type="hidden" value="@Model.Body"/>
                    </div>
                </div>
                    <div class="form-group">
                        <div class="commentEditButtons">
                            <button type="submit" class="btn btn-info submitEditCommentForm" data-id="@Model.Id" data-diary="@Model.IsDiary">
                                <span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Dodaj komentarz!
                            </button>
                            <button type="button" class="btn btn-danger .btn-sm btnCancelEdit">Anuluj</button>
                        </div>
                    </div>
                </div>
        </div>
    }
}
else {
    @Html.Partial("_HumanumErrareEst");
}

@*SCRIPTS FOR VIEW*@
<script type="text/javascript" src="~/Views/Articles/Scripts/ArticlesCommentEdit.js"></script>
<link href="~/Views/Articles/Styles/CommentEdit.css" rel="stylesheet" type="text/css" />