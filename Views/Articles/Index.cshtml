@using ComX_0._0._2.Helpers
@model IEnumerable<ComX_0._0._2.Views.Articles.Models.Articles>

@{
    Layout = "~/Views/Articles/_Articles.cshtml";
    ViewBag.Title = "NekroPlaza - doświadcz dobroci";
    ViewBag.Description = "Najnowsze smakowitości, dobrocie najbardziej trendy, kontrowersje, wybuchy atomowych laserów i nieumarli - NEKROPLAZA.PL - zakosztuj dobroci.";
    var articleHelper = new ArticleHelper();
    var userHelper = new UserHelper();
    var generalHelper = new GeneralHelper();
}
@*<ul class="indexListMenu list-inline">
    <li><a class="indexListMenuItem" data-id="" href="#pager">Wszystkie</a></li>
    @foreach (var category in articleHelper.GetAllCategories().Take(6))
    {
        <li><a class="indexListMenuItem" data-id="@category.Id" href="#pager">@category.Name</a></li>
    }
</ul>*@
<div id="pager">
    <div class="articlesIndexContainer">
        <div class="articlesIndexHeader">
            <h3>POSTY:</h3>
        </div>
        <ul class="content articlesIndexTable" id="content">
            @foreach (var item in Model) {
                <div class="articlesIndexSingle">
                    <a class="singleIndexAnchor" href="@HttpUtility.UrlDecode(Url.Action("Details", "Articles", new {@id = generalHelper.RemoveSpecialCharsFromString(item.Name)}))">
                        @if (articleHelper.GetImageByArticleId(item.Id) != null) {
                            <div class="articlesIndexSingleImage">
                                <div class="bannerPanelImageContainerIndex">
                                    <img src='@Url.Content(articleHelper.GetImageRelativePathByArticleId(item.Id))'/>
                                </div>
                                <div class="bannerPanelImageMainIndex">
                                    <img src='@Url.Content(articleHelper.GetImageRelativePathByArticleId(item.Id))'/>
                                </div>
                                <div class="imageOverlayColorIndex"></div>
                            </div>
                        }
                    </a>
                    <div class="articlesIndexSingleBody">
                        <a class="singleIndexAnchor" href="@HttpUtility.UrlDecode(Url.Action("Details", "Articles", new {@id = generalHelper.RemoveSpecialCharsFromString(item.Name)}))">
                            <div class="indexArticleTitle">
                                <div class="indexArticleTitleTopSection">
                                    <div class="articlesIndexSingleCategories">
                                        <span class="glyphicon glyphicon-tags" aria-hidden="true"></span> @articleHelper.GetCategoryById(item.CategoryId).Name,
                                        @articleHelper.GetSubCategoryById(item.SubCategoryId).Name
                                    </div>
                                    <div class="articlesIndexSingleDate">
                                        <span class="glyphicon glyphicon-time" aria-hidden="true"></span> @item.DateCreated.ToShortDateString()
                                    </div>
                                </div>
                                <h4 class="singleIndexTitle">@item.Name</h4>
                            </div>
                        </a>
                        <hr class="singleIndexLine"/>
                        <div class="articleIndexSingleText">
                            <div class="indexArticleBody">
                                <p>@Html.Raw(WebUtility.HtmlDecode(item.Prelude))</p>
                            </div>
                        </div>
                        <div class="articlesIndexSingleFooter">
                            <p><span class="glyphicon glyphicon-user" aria-hidden="true"></span> @userHelper.GetUserById(item.UserId).UserName</p>
                        </div>
                    </div>
                </div>
            }
        </ul>
        <hr/>
        <div class="page_navigation"></div>
    </div>
</div>
<div class="articlesIndexReviewsContainer">
    <div class="articlesIndexReviewsHeader">
        <h3>OSTATNIE RECKI PŁYTOWE:</h3>
    </div>
    <div class="indexReviewsContainer">
        @foreach (var review in articleHelper.GetLastMusicReviews(4)) {
            <a class="indexSingleReviewAnchor" href="@HttpUtility.UrlDecode(Url.Action("Details", "Articles", new {@id = generalHelper.RemoveSpecialCharsFromString(review.Name)}))">
                <div class="indexSingleReview">
                    <div class="indexSingleReviewImageContainer">
                        <img src='@Url.Content(articleHelper.GetImageRelativePathByArticleId(review.Id))'/>
                    </div>
                    <div class="indexReviewTitle">
                        <p>@review.Name</p>
                    </div>
                </div>
            </a>
        }
    </div>
    <div class="moreMusicReviews">
        <a class="seeMoreReviewsFromIndex" href="@Url.Action("Categories", "Articles", new {@id = "Recenzje", @subId = "Muzyka"})">
            <p>Zobacz wszystkie recki muzyczne <span class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></span></p>
        </a>
    </div>
</div>

@*SCRIPTS FOR VIEW*@
<script type="text/javascript" src="~/Views/Articles/Scripts/ArticlesIndex.js"></script>
<link href="~/Views/Articles/Styles/Index.css" rel="stylesheet" type="text/css" />