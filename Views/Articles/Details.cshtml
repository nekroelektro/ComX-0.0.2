@using ComX_0._0._2.Helpers
@using ComX_0._0._2.Models
@model ComX_0._0._2.Models.Articles

@{
    var comments = new Comments();
    var articleHelper = new ArticleHelper();
    var generalHelper = new GeneralHelper();
    var userHelper = new UserHelper();
    ViewBag.Title = @Model.Name + " - " + articleHelper.GetCategoryById(@Model.CategoryId).Name + " - NekroPlaza";
    var currentUrl = generalHelper.GetCurrentPageUrl();
}
@if (userHelper.IsAdminUser(User))
{
    <div class="topDetailPanel" style="display: inline-block; width: 100%; height: auto">
        @*<h2 style="width: 60%; float: left">@Html.DisplayFor(model => model.Name):</h2>*@
        <div class="buttons" style="float: right; margin-top: 1em;">
            <button type="button" class="btn btn-default .btn-sm" onclick="location.href = '@Url.Action("Index", "Articles")'">
                <span class="glyphicon glyphicon-arrow-up" aria-hidden="true" style="font-size: 1.1em"></span>DO GÓRY
            </button>
            <button type="button" class="btn btn-success .btn-sm" onclick="location.href = '@Url.Action("Edit", "Articles", new {Id = Model.Id})'">
                <span class="glyphicon glyphicon-edit" aria-hidden="true" style="font-size: 1.1em"></span>EDIT
            </button>
            <button type="button" class="btn btn-danger .btn-sm" onclick="location.href = '@Url.Action("Delete", "Articles", new {Id = Model.Id})'">
                <span class="glyphicon glyphicon-erase" aria-hidden="true" style="font-size: 1.1em"></span>DELETE
            </button>
        </div>
        @*<div class="datesDetailsArticles" style="display: inline-block; float: left; clear: both;">
                <p style="float: left;"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> @userHelper.GetUserById(Model.UserId).UserName &nbsp;&nbsp;&nbsp;&nbsp; <span class="glyphicon glyphicon-time" aria-hidden="true"></span> @Html.DisplayFor(model => model.DateCreated)</p>
            </div>*@
    </div>
}
<div class="detailsBannerPanel" style="width: 102.7%; margin-left: -1.1em !important; height: 40em; margin-bottom: 1em; position: relative; z-index: 5; overflow: hidden;">
    <div class="bannerPanelImageContainer" style="width: 100%; height: 100%; text-align: center; margin: 0 auto; background-color: black; z-index: 1; overflow: hidden;">
        <img src='@Url.Content(articleHelper.GetImageRelativePathByArticleId(Model.Id))' style="width: 100%; text-align: center; margin: 0 auto; z-index: 0; vertical-align: middle;" />
    </div>
    <div class="bannerPanelImageMain" style="width: 100%; height: 100%; text-align: center; margin: 0 auto; z-index: 3; overflow: hidden; position: absolute; top: 0;">
        <img src='@Url.Content(articleHelper.GetImageRelativePathByArticleId(Model.Id))' style="height:100%; text-align: center; margin: 0 auto; z-index: 0; vertical-align: middle;" />
    </div>
    <div class="imageOverlayColor" style="width: 100%; height: 100%; position: absolute; top: 0; left: 0; background: rgba(0, 0, 0, 0.7); z-index: 2;"></div>
    <div class="bannerPanelInfo" style="max-width: 50%;font-family: 'Amarante', sans-serif;position: absolute; bottom: 3em; left: 2em; color: black; padding: 1em;background: rgba(255, 255, 255, 0.7); z-index: 4;">
        @if (Model.Series != Guid.Empty && articleHelper.GetSeriesById(Model.Series).Name != "Default")
        {
            <h3 style="background-color: #2B823C; color: black;">@articleHelper.GetSeriesById(Model.Series).Name</h3>
        }
        <h2 style="width: 100%; float: left; margin-top: 0;">@Html.DisplayFor(model => model.Name)</h2>
        <div class="datesDetailsArticles" style="display: inline-block; float: left; clear: both; ">
            <p style="float: left;">
                <span class="glyphicon glyphicon-user" aria-hidden="true"></span> @userHelper.GetUserById(Model.UserId).UserName &nbsp;&nbsp;&nbsp;&nbsp; <span class="glyphicon glyphicon-time" aria-hidden="true"></span> @Html.DisplayFor(model => model.DateCreated) &nbsp;&nbsp;&nbsp;&nbsp; <span class="glyphicon glyphicon-tags" aria-hidden="true"></span> @articleHelper.GetCategoryById(Model.CategoryId).Name,
                @articleHelper.GetSubCategoryById(Model.SubCategoryId).Name
            </p>
        </div>
    </div>
</div>
<div class="detailContainer" style="width: 68.6%; float: left;">
    <div class="articleDetail" style="width: 100%; float: left; border-bottom: 2px solid #2B823C;">
        @*@if (articleHelper.GetImageByArticleId(Model.Id) != null) {
                <div class="articleMainImage" style="width: 100%; text-align: center; margin: 0 auto; background-color: black;">
                    <img src='@Url.Content(articleHelper.GetImageRelativePathByArticleId(Model.Id))' style="max-width: 100%; max-height: 30em; text-align: center; margin: 0 auto;"/>
                </div>
            }*@

        <div class="articleDetailsIntro" style="text-align: justify; font-size: 1.3em; text-indent: 0.9em; border-left: 0.5em #2B823C solid;border-right: 0.5em #2B823C solid; width: 100%; padding: 2px 5px 2px 5px; padding-left: 1em; padding-right: 1em; font-family: 'Krona One', sans-serif;">
            @Html.Raw(WebUtility.HtmlDecode(Model.Prelude))
        </div>
        <hr style="margin-top: 0;" />

        <div class="articleDetailsBody" style="text-align: justify; font-size: 1.2em; padding: 1em; font-family: 'Coda', sans-serif;">
            @Html.Raw(WebUtility.HtmlDecode(Model.Body))
        </div>
        <!-- Your like button code -->
        <div class="fb-like" style="padding: 2em;" data-href="@currentUrl" data-layout="button" data-action="like" data-size="small" data-show-faces="false" data-share="true"></div>

        @*<hr style="border:2px solid #2B823C; background-color:#2B823C" />*@
    </div>

    <div style="clear: both">
        @Html.Action("_LastFromCategory", new { amount = 4, categoryId = Model.CategoryId, articleId = Model.Id })
        <hr style="border: 2px solid #2B823C; background-color: #2B823C; width: 100%;" />
        <div id="detailsCommentSection">
            @Html.Action("_Comments", new { id = Guid.Empty, artId = Model.Id })
        </div>
    </div>
</div>
@Html.Partial("_SideBar")

<div id="fb-root"></div>
<script>
    (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/pl_PL/sdk.js#xfbml=1&version=v2.7";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>