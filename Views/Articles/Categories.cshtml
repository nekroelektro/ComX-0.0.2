@using ComX_0._0._2.Helpers
@model IEnumerable<ComX_0._0._2.Views.Articles.Models.DtoModels.IndexModelDto>
@{
    Layout = "~/Views/Articles/_Articles.cshtml";
    ArticleHelper articleHelper = new ArticleHelper();
    GeneralHelper generalHelper = new GeneralHelper();
    var catId = ViewBag.CategoryIdentificator;
    var category = articleHelper.GetCategoryById(catId);
    UserHelper userHelper = new UserHelper();
    ViewBag.Title = string.Format("{0} - NekroPlaza - doświadcz dobroci", category.Name);
}

<div class="categoryArticleTitle">
    <h2>Przeglądasz posty z kategorii <b>@category.Name</b>:</h2>
</div>
<hr/>
@if (Model.Any())
{
    <div id="pager">
        <ul class="content articlesIndexTable" id="content">
            @foreach (var item in Model)
            {
                <div class="indexSingleArticleContainer col-md-6 col-sm-12">
                    <a class="singleIndexAnchor" href="@HttpUtility.UrlDecode(Url.Action("Details", "Articles", new {@id = generalHelper.RemoveSpecialCharsFromString(item.Name)}))">
                        @if (articleHelper.GetImageByArticleId(item.Id) != null)
                        {
                            <div class="articlesIndexSingleImage sliderRightPanelElement">
                                <p class="bannerArticleTagsIndex">
                                    <span class="glyphicon glyphicon-tags" aria-hidden="true"></span> @articleHelper.GetCategoryById(item.Categories.Value).Name,
                                    @articleHelper.GetSubCategoryById(item.SubCategories.Value).Name
                                </p>
                                <div class="bannerPanelImageContainerIndex">
                                    <img src='@Url.Content(articleHelper.GetImageRelativePathByArticleId(item.Id))' />
                                </div>
                                <div class="bannerPanelImageMainIndex">
                                    <img id="articleIndexImage" src='@Url.Content(articleHelper.GetImageRelativePathByArticleId(item.Id))' />
                                </div>
                                <div class="imageOverlayColorIndex"></div>
                                <div class="bannerPanelInfoIndex">
                                    <h3 class="bannerArticleNameIndex">@item.Name</h3>
                                    <hr class="articlesIndexLine" />
                                    <div class="bannerArticlePreludeIndex">
                                        @Html.Raw(WebUtility.HtmlDecode(item.IndexPrologue))
                                    </div>
                                </div>
                            </div>
                        }
                    </a>
                </div>
            }
        </ul>
        <hr />
        <div class="page_navigation"></div>
    </div>
}
else {
    <div class="noItemsInCategorySection">
        <h3>:( <br/>Nie bój, nie bój, jeszcze żadnych dobroci tu nie ma. Pewnikiem będą niebawem.</h3>
    </div>
}

@*SCRIPTS FOR VIEW*@
<script type="text/javascript" src="~/Views/Articles/Scripts/ArticlesCategories.js"></script>
<script type="text/javascript" src="~/Views/Articles/Scripts/ArticlesIndex.js"></script>
<link href="~/Views/Articles/Styles/Index.css" rel="stylesheet" type="text/css" />
<link href="~/Views/Articles/Styles/Categories.css" rel="stylesheet" type="text/css" />
